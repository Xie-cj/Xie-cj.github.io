<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Vue组件间通信 | 小菜鸡&#39;s blog</title>

<!-- 百度站长验证 -->
<meta name="baidu-site-verification" content="P3HYFUVW3p" />
<!-- 谷歌验证 -->
<meta name="google-site-verification" content="EI0bBXpDQXO1DnhuJu15fyEoiRDrxj1Lc_kgFORW6dQ" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<!-- <link rel="shortcut icon" href="https://blog.xcj.im/favicon.ico?v=1584953243244"> -->
<link rel="shortcut icon" href="https://blog.xcj.im/favicon.ico">
<link rel="stylesheet" href="https://blog.xcj.im/styles/main.css">
<link href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/vs2015.min.css" rel="stylesheet">
<link href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.css" rel="stylesheet">


<link rel="stylesheet" href="https://cdn.staticfile.org/aos/3.0.0-beta.6/aos.css" />
<script src="https://cdn.staticfile.org/vue/2.6.11/vue.min.js"></script>



    <meta name="description" content="组件（Component）是 Vue.js 最强大的功能之一。
组件化是Vue的核心思想之一，这种化整为零的方式主要为了代码重用以及便于后期维护。

组件系统让我们可以用独立可复用的小组件来构建大型应用，几乎任意类型的应用的界面都可以抽象为..." />
    <meta name="keywords" content="组件,Vue" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://blog.xcj.im">
        <!-- <img src="https://blog.xcj.im/images/avatar.png?v=1584953243244" class="site-logo"> -->
        <img src="https://blog.xcj.im/images/avatar.png" class="site-logo">
        <h1 class="site-title">小菜鸡&#39;s blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/Xie-cj" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      小菜鸡就是我，我就是 · 小菜鸡~
    </div>
    <div class="site-footer">
      友情链接：<a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><a class="rss" href="https://blog.xcj.im/atom.xml" title="RSS" target="_blank"><svg t="1584027465553" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1537" width="20" height="20"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#FD9B00" p-id="1538"></path><path d="M638.254276 718.937463c0-186.152591-151.296463-337.64564-337.178748-337.64564v-80.094453c230.17966 0 417.439071 187.459069 417.43907 417.739069H638.254276zM576.586686 718.937463h-80.368854c0-52.377878-20.342554-101.550994-57.208569-138.422129-36.882397-36.960212-85.890668-57.311981-138.048411-57.311981v-80.070904C452.934103 443.132449 576.586686 566.766602 576.586686 718.937463zM356.501512 607.516214c30.775945 0 55.629737 25.013518 55.629737 55.528373 0 30.607004-24.853792 55.351241-55.629737 55.351241-30.667413 0-55.583663-24.743213-55.583663-55.351241C300.917849 632.529733 325.834099 607.516214 356.501512 607.516214z" fill="#FFFFFF" p-id="1539"></path></svg></a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Vue组件间通信</h2>
            <div class="post-date">2020-03-18</div>
            
            <div class="post-content" v-pre>
              <p>组件（Component）是 Vue.js 最强大的功能之一。<br>
组件化是Vue的核心思想之一，这种化整为零的方式主要为了代码重用以及便于后期维护。</p>
<!-- more -->
<p>组件系统让我们可以用独立可复用的小组件来构建大型应用，几乎任意类型的应用的界面都可以抽象为一个组件树：<br>
<img src="https://www.runoob.com/wp-content/uploads/2017/01/components.png" alt="Vue组件树" loading="lazy"></p>
<h1 id="组件间通信">组件间通信</h1>
<p>因为组件的作用域是独立的，组件内的数据无法被其他组件直接访问到。所以需要通过特定的方式通信，组件间才能实现信息交互。</p>
<h2 id="父组件-子组件">父组件 =&gt; 子组件</h2>
<ul>
<li>props<pre><code class="language-html">&lt;!-- 父组件传值 --&gt;
&lt;message msg=&quot;Hello Vue.js&quot;&gt;&lt;/message&gt;
</code></pre>
<pre><code class="language-js">// 子组件获取数据
props: { msg: String }
</code></pre>
</li>
<li>$refs<pre><code class="language-html">&lt;!-- 父组件创建引用节点 --&gt;
&lt;message ref=&quot;msg&quot;&gt;&lt;/message&gt;
</code></pre>
<pre><code class="language-js">// 传递数据
this.$refs.msg.xxx = xxx
</code></pre>
</li>
<li>$children<pre><code class="language-js">// 给第[n]个子组件传递数据
this.$children[0].xxx = xxx
</code></pre>
<blockquote>
<p>需要注意 $children 并不保证顺序，也不是响应式的。如果你发现自己正在尝试使用 $children 来进行数据绑定，考虑使用一个数组配合 v-for 来生成子组件，并且使用 Array 作为真正的来源。</p>
</blockquote>
</li>
</ul>
<h2 id="子组件-父组件">子组件 =&gt; 父组件</h2>
<p>$emit</p>
<pre><code class="language-js">// 子组件发送数据
this.$emit('newName', '小菜鸡')
</code></pre>
<pre><code class="language-html">&lt;!-- 父组件响应自定义事件并获取数据 --&gt;
&lt;name @newName=&quot;setName($event)&quot;&gt;&lt;/name&gt;
</code></pre>
<h2 id="兄弟组件之间">兄弟组件之间</h2>
<p>给共同的祖辈($parent或$root)添加监听自定义事件</p>
<pre><code class="language-js">// 接收参数子组件让父组件监听fun事件
this.$parent.$on('fun', (e) =&gt; {
    console.log(e)
})

// 发送参数子组件让父组件响应fun事件
this.$parent.$emit('fun', e)
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://blog.xcj.im/tag/HwoIAAl7M/" class="tag">
                    组件
                  </a>
                
                  <a href="https://blog.xcj.im/tag/U7JAVWl1d/" class="tag">
                    Vue
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://blog.xcj.im/post/hello-world/">
                  <h3 class="post-title">
                    Hello World!
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.staticfile.org/aos/3.0.0-beta.6/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>

<script src="https://cdn.staticfile.org/instantclick/3.1.0/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>


  <script src="https://cdn.staticfile.org/highlight.js/9.18.1/highlight.min.js"></script>
  <script src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script>
  <script src="https://cdn.staticfile.org/humane-js/3.2.2/humane.min.js"></script>

  <script src="https://expand.xcj.im/js/expand.js"></script>

  <link rel="stylesheet" href="https://cdn.staticfile.org/humane-js/3.2.2/themes/jackedup.min.css">








<script>
  // // markdown生成的超链接设置blank属性
  // var aTags = Array.prototype.slice.apply(document.getElementsByTagName("a"));
  // aTags.forEach(function(el) {
  //   if(el.href.indexOf("?_blank") > -1) {
  //     el.target = "_blank";
  //     el.href = el.href.replace("?_blank", "");
  //   }
  // });

  // // 给不支持forEach的NodeList添加forEach方法
  // if (window.NodeList && !NodeList.prototype.forEach) {
  //     NodeList.prototype.forEach = function (callback, thisArg) {
  //         thisArg = thisArg || window
  //         for (var i = 0; i < this.length; i++) {
  //             callback.call(thisArg, this[i], i, this)
  //         }
  //     }
  // }

  // // 页面有代码块执行高亮函数和行号函数
  //   if(document.querySelectorAll('pre code').length) {
  //     hljs.initHighlighting()
  //     lineNumber() // 添加行号和复制按钮
  //   }

  //   // 要copy的节点
  //   var copyNode

  //   function lineNumber(){
  //     var elementArr = document.querySelectorAll('pre code');
      
  //     elementArr.forEach(function (item, index) {
  //       var button = document.createElement('button')
  //       // 利用伪元素获取自定义属性，直接写innerText在执行复制操作会被提取
  //       button.setAttribute('data-title', '复制代码')
  //       button.className = 'copy-code'
  //       // 按钮添加点击事件，将copyNode替换为父节点
  //       button.onclick = function() {
  //         copyNode = this.parentNode
  //       }
  //       item.appendChild(button)

  //       // 获取代码块的文本行数
  //       var codeTextLine = item.textContent.trim().split('\n');
  //       if(codeTextLine.length >= 10) {
  //         // 根据代码行数动态修改代码块内边距
  //         item.style.paddingLeft = (codeTextLine.length).toString().length * 0.6 + 1.4 + 'rem';
  //         // 创建显示行号的ol标签
  //         item.appendChild(createOl(codeTextLine));
  //       }
  //     });
  //   }

  //   // 创建ol标签
  //   function createOl(arr) {
  //     var ol = document.createElement('ol');
  //     ol.className = 'line-box'
  //     arr.forEach(function (item, index) {
  //       var li = document.createElement('li'),
  //           div = document.createElement('div');
  //       div.className = 'line-number';
  //       // 利用伪元素获取数据来显示行号
  //       div.setAttribute('data-line', index + 1);
  //       li.appendChild(div);
  //       ol.appendChild(li);
  //     });
  //     return ol;
  //   }

  //   var clipboard = new ClipboardJS('.copy-code', {
  //         text: function () {
  //             return copyNode.innerText;
  //         }
  //       });
  //   clipboard.on('success', function (e) {
  //     console.log('复制成功！')
  //   });
  //   clipboard.on('error', function (e) {
  //     console.log()
  //     alert('一键复制失败，请手动复制！');
  //   });

</script>
  </body>
</html>
